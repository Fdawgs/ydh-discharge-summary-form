<div id="Discharge" class="tab-div">
    <div class="full-column">

        <div class="block">
            <label>
                <h3>Discharge Details</h3>
            </label>
        </div>

        <div class="block">
            <label>Discharging Specialty:</label>
            <!-- Refer to https://www.datadictionary.nhs.uk/data_dictionary/attributes/m/main_specialty_code_de.asp -->
            <select class="input" name="discharge_specialty">
                <%  const dischargeSpecialtyOption = ['',
                    'ACCIDENT & EMERGENCY',
                    'ANAESTHETICS',
                    'CARDIOLOGY',
                    'CLINICAL HAEMATOLOGY',
                    'DERMATOLOGY',
                    'ENT',
                    'GASTROENTEROLOGY',
                    'GENERAL MEDICINE',
                    'GENERAL SURGERY',
                    'GERIATRIC MEDICINE',
                    'GYNAECOLOGY',
                    'MEDICAL ONCOLOGY',
                    'MIDWIFE EPISODE',
                    'NEPHROLOGY',
                    'NEUROLOGY',
                    'OBSTETRICS',
                    'OPHTHALMOLOGY',
                    'ORAL & MAXILLO FACIAL SURGERY',
                    'ORAL SURGERY',
                    'PAEDIATRIC CARDIOLOGY',
                    'PAEDIATRIC DENTISTRY',
                    'PAEDIATRICS',
                    'PLASTIC SURGERY',
                    'RESPIRATORY MEDICINE',
                    'RHEUMATOLOGY',
                    'TRAUMA & ORTHOPAEDICS',
                    'UROLOGY'];
                    for (let i = 0; i < dischargeSpecialtyOption.length; i += 1) {
                        let attributes;

                        if (typeof discharge_specialty !== 'undefined' && discharge_specialty === dischargeSpecialtyOption[i]) {
                            attributes = 'selected';
                        } else {
                            attributes = '';
                        }
                %>
                <option value="<%=dischargeSpecialtyOption[i]%>" <%-attributes%>><%=dischargeSpecialtyOption[i]%>
                </option>
                <%
                    }
                %>
            </select>
        </div>

        <div class="block">
            <label>Discharge Date:</label>
            <input class="input" type="date" name="discharge_date"
                value="<%- typeof discharge_date !== 'undefined' ? discharge_date : '' %>" />
        </div>

        <div class="block">
            <label>Discharge Time:</label>
            <input class="input" type="time" name="discharge_time"
                value="<%- typeof discharge_time !== 'undefined' ? discharge_time : '' %>" />
        </div>

        <div class="block">
            <label>Estimated Discharge Date:</label>
            <input class="input" type="date" name="discharge_estimatedDate"
                value="<%- typeof discharge_estimatedDate !== 'undefined' ? discharge_estimatedDate : '' %>" />
        </div>

        <div class="block">
            <label>Discharge Method:</label>
            <!-- Refer to https://www.datadictionary.nhs.uk/data_dictionary/attributes/d/disc/discharge_method_de.asp -->
            <select class="input" name="discharge_method">
                <%  const dischargeMethodOption = [
                    {
                        value: 'PATIENT discharged on clinical advice or with clinical consent',
                        option: 'Discharged on clinical advice or with clinical consent'
                    },
                    {
                        value: 'PATIENT discharged him/herself or was discharged by a relative or advocate',
                        option: 'Discharged him/herself or was discharged by a relative or advocate'
                    },
                    {
                        value: 'PATIENT discharged by mental health review tribunal, Home Secretary or Court',
                        option: 'Discharged by mental health review tribunal, Home Secretary or Court'
                    },
                    {
                        value: 'PATIENT died',
                        option: 'Died'
                    },
                    {
                        value: 'Stillbirth',
                        option: 'Stillbirth'
                    }
                ];

                for (let n = 0; n < dischargeMethodOption.length; n += 1) {
                    let attributes;

                    if (typeof discharge_method !== 'undefined' && discharge_method === dischargeMethodOption[n].value) {
                        attributes = 'selected';
                    } else {
                        attributes = '';
                    }
                %>
                <option value="<%=dischargeMethodOption[n].value%>" <%-attributes%>><%=dischargeMethodOption[n].option%>
                </option>
                <%
                    }
                %>
            </select>
        </div>

        <div class="block">
            <label>Discharging Consultant:</label>
            <input class="input" type="text" name="discharge_careProvider"
                value="<%- typeof discharge_careProvider !== 'undefined' ? discharge_careProvider : '' %>" />
        </div>

        <div class="block">
            <label>Discharging Ward:</label>
            <select class="input" id="discharge_ward" name="discharge_ward">
                <%  const dischargeWardOption = ['', '10', '6A', '6B', '7A', '7B', '8A', '8B', '9A',
                    '9B', 'AAU', 'ACCU', 'AEC', 'CDU(P)', 'DL', 'DYTH', 'EAU', 'ED', 'FAU', 'FREYA',
                    'GYNAE THEATRES', 'ICU', 'JASMINE', 'KW', 'MAIN THEATRES', 'QDH', 'QUEENSWAY'];
                    for (let o = 0; o < dischargeWardOption.length; o += 1) {
                        let attributes;

                        if (typeof discharge_ward !== 'undefined' && discharge_ward === dischargeWardOption[o]) {
                            attributes = 'selected';
                        } else {
                            attributes = '';
                        }
                %>
                <option value="<%=dischargeWardOption[o]%>" <%-attributes%>><%=dischargeWardOption[o]%></option>
                <%
                    }
                %>
            </select>
        </div>

        <div class="block">
            <label>Discharge Pathway:</label>
            <select class="input" id="discharge_pathway" name="discharge_pathway">
                <%  const dischargePathwayOption = ['', 'Discharged Palliative Pathway',
                    'Discharged Pathway One', 'Discharged Pathway Two - Cooksons Court',
                    'Discharged Pathway Two – West Mendip', 'Discharged Pathway Three – Sherborne House',
                    'Discharged Stroke Pathway'];
                    for (let o = 0; o < dischargePathwayOption.length; o += 1) {
                        let attributes;

                        if (typeof discharge_pathway !== 'undefined' && discharge_pathway === dischargePathwayOption[o]) {
                            attributes = 'selected';
                        } else {
                            attributes = '';
                        }
                %>
                <option value="<%=dischargePathwayOption[o]%>" <%-attributes%>><%=dischargePathwayOption[o]%></option>
                <%
                    }
                %>
            </select>
        </div>

        <div class="block">
            <label>Discharge Destination:</label>
            <select class="input" id="discharge_destination" name="discharge_destination"
                onchange="selectToggle('discharge_destination', 'Usual place of residence', 'discharge-different-address');">
                <%  const dischargeDestinationOption = [
                        { value: '', option: '', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Blandford Community Hospital', option: 'Blandford Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Bridgwater Community Hospital', option: 'Bridgwater Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Bristol Royal Infirmary', option: 'Bristol Royal Infirmary', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Burnham-on-sea War Memorial Hospital', option: 'Burnham-on-sea War Memorial Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Chard Community Hospital', option: 'Chard Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Crewkerne Community Hospital', option: 'Crewkerne Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Dene Barton Community Hospital', option: 'Dene Barton Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Dorset County Hospital', option: 'Dorset County Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Family/Friend', option: 'Family/Friend', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Frome Community Hospital', option: 'Frome Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Minehead Community Hospital', option: 'Minehead Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Musgrove Park Hospital - Taunton', option: 'Musgrove Park Hospital - Taunton', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Nursing Accommodation', option: 'Nursing Accommodation', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Residential Accommodation', option: 'Residential Accommodation', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Royal Devon and Exeter Hospital', option: 'Royal Devon and Exeter Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Salisbury District Hospital', option: 'Salisbury District Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Shepton Mallet Community Hospital', option: 'Shepton Mallet Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'South Petherton Community Hospital', option: 'South Petherton Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Southampton General Hospital', option: 'Southampton General Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Southmead Hospital - Bristol', option: 'Southmead Hospital - Bristol', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Usual place of Residence', option: 'Usual place of Residence', attributes: 'onclick="clearValue(\'discharge-input\'); hideClass(\'discharge-different-address\');"' },
                        { value: 'Wellington Community Hospital', option: 'Wellington Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'West Mendip Community Hospital', option: 'West Mendip Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Westminster Memorial Hospital - Shaftesbury', option: 'Westminster Memorial Hospital - Shaftesbury', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Williton Community Hospital', option: 'Williton Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Wincanton Community Hospital', option: 'Wincanton Community Hospital', attributes: 'onclick="populateDischargeDestination(this);"' },
                        { value: 'Yeatman Hospital - Sherborne', option: 'Yeatman Hospital - Sherborne', attributes: 'onclick="populateDischargeDestination(this);"' }
                    ];

                    for (let p = 0; p < dischargeDestinationOption.length; p += 1) {
                        let attributes;

                        if (typeof discharge_destination !== 'undefined' && discharge_destination === dischargeDestinationOption[p].value) {
                            attributes = `${dischargeDestinationOption[p].attributes} selected`;
                        } else {
                            attributes = dischargeDestinationOption[p].attributes;
                        }
                %>
                <option value="<%=dischargeDestinationOption[p].value%>" <%-attributes%>>
                    <%=dischargeDestinationOption[p].option%>
                </option>
                <%
                }
            %>
            </select>
        </div>

        <div class="discharge-different-address block">
            <label>
                <h4>Destination Address</h4>
            </label>
        </div>


        <div class="discharge-different-address block">
            <label>Line 1:</label>
            <input class="input discharge-input" type="text" name="discharge_differentAddressLine1"
                value="<%- typeof discharge_differentAddressLine1 !== 'undefined' ? discharge_differentAddressLine1 : '' %>" />
        </div>

        <div class="discharge-different-address block">
            <label>Line 2:</label>
            <input class="input discharge-input" type="text" name="discharge_differentAddressLine2"
                value="<%- typeof discharge_differentAddressLine2 !== 'undefined' ? discharge_differentAddressLine2 : '' %>" />
        </div>

        <div class="discharge-different-address block">
            <label>City:</label>
            <input class="input discharge-input" type="text" name="discharge_differentAddressCity"
                value="<%- typeof discharge_differentAddressCity !== 'undefined' ? discharge_differentAddressCity : '' %>" />
        </div>

        <div class="discharge-different-address block">
            <label>County:</label>
            <input class="input discharge-input" type="text" name="discharge_differentAddressDistrict"
                value="<%- typeof discharge_differentAddressDistrict !== 'undefined' ? discharge_differentAddressDistrict : '' %>" />
        </div>

        <div class="discharge-different-address block">
            <label>Postcode:</label>
            <input class="input discharge-input" type="text" name="discharge_differentAddressPostalCode"
                value="<%- typeof discharge_differentAddressPostalCode !== 'undefined' ? discharge_differentAddressPostalCode : '' %>" />
        </div>

        <div class="discharge-different-address block">
            <label>Contact No:</label>
            <input class="input discharge-input" type="tel" name="discharge_differentAddressContactNo"
                value="<%- typeof discharge_differentAddressContactNo !== 'undefined' ? discharge_differentAddressContactNo : '' %>" />
        </div>

        <div class="discharge-different-address block">
            <label>Comments:</label>
            <textarea class="input discharge-input" name="discharge_differentAddressComments" cols="20" rows="4"
                spellcheck="true"><%- typeof discharge_differentAddressComments !== 'undefined' ? discharge_differentAddressComments : '' %></textarea>
        </div>
    </div>
    <% include save_section.ejs %>
</div>