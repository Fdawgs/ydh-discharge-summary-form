"use strict";function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var ActiveDirectory=require("activedirectory"),adAuthorizationMiddleware=require("./ad-authorization.middleware"),_require=require("../../test.config"),activeDirectoryConfig=_require.activeDirectoryConfig;require("regenerator-runtime"),describe("Active Directory authentication middleware",function(){test("Should return a middleware function",function(){var a=adAuthorizationMiddleware();expect(_typeof(a)).toBe("function")}),test("Should remove YDH domain from name and store in locals",function(){var a=new ActiveDirectory(activeDirectoryConfig),b=adAuthorizationMiddleware(a),c={locals:{}},d=jest.fn();b({headers:{"x-iisnode-logon_user":"YDH\\frazer.smith"}},c,d),expect(c.locals.user).toBe("frazer.smith")})});